---
title: "433HW1"
output: github_document
---


## How many flights have a missing dep_time? What other variables are missing? What might these rows represent?

```{r}
library(nycflights13)
library(tidyverse)
filter(flights, is.na(dep_time))
```
The arr_time and dep_delay are also missing. If all these three data are missing, there is a high probability that the flight was canceled.


## Currently dep_time and sched_dep_time are convenient to look at, but hard to compute with because theyâ€™re not really continuous numbers. Convert them to a more convenient representation of number of minutes since midnight.

```{r}
flights_time=mutate(flights,
                    dep_time_mins=(dep_time%/%100*60+dep_time%%100)%%1440,
                    sched_dep_time_mins=(sched_dep_time%/%100*60
                                         +sched_dep_time%%100)%%1440)
select(flights_time,dep_time,dep_time_mins,sched_dep_time,sched_dep_time_mins)
```


## Look at the number of canceled flights per day. Is there a pattern? Is the proportion of canceled flights related to the average delay? Use multiple dyplr operations, all on one line, concluding with ggplot(aes(x=,y=))+geom_point()

```{r}
cancel_per_day=flights%>%
  mutate(cancel=(is.na(arr_delay)|is.na(dep_delay)))%>%
  group_by(year,month,day)%>%
  summarise(cancel_num=sum(cancel),flights_num=n())
ggplot(cancel_per_day)+geom_point(aes(x=flights_num,y=cancel_num))
cancel_and_delay=flights%>%
  mutate(cancel=(is.na(arr_delay)|is.na(dep_delay)))%>%
  group_by(year,month,day)%>%
  summarise(cancel_prob=mean(cancel),
            avg_dep_delay=mean(dep_delay,na.rm=T),
            avg_arr_delay=mean(arr_delay,na.rm=T))%>%ungroup()
ggplot(cancel_and_delay)+geom_point(aes(x=avg_dep_delay,y=cancel_prob))
ggplot(cancel_and_delay)+geom_point(aes(x=avg_arr_delay,y=cancel_prob))
```

